>>> WEBSOCKET ENDPOINT CALLED for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f <<<
DEBUG WS: Token received: eyJhbGciOiJSUzI...
DEBUG WS: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Token keys: ['name', 'picture', 'iss', 'aud', 'auth_time', 'user_id', 'sub', 'iat', 'exp', 'email', 'email_verified', 'firebase', 'uid']
DEBUG WS: Extracted firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Returning decoded token with uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> TOKEN VERIFIED, user_info type: <class 'dict'>
>>> EXTRACTING FIREBASE UID...
>>> FIREBASE UID: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> LOOKING UP USER IN DATABASE...
WebSocket error: [Errno 8] nodename nor servname provided, or not known
INFO:     127.0.0.1:51230 - "WebSocket /api/ws/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f?token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkMjEzMGZlZjAyNTg3ZmQ4ODYxODg2OTgyMjczNGVmNzZhMTExNjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiSmFjayBMb2Z3YWxsIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0paVWpvN0E5QzcxNnNTdW1yUldHMmV0ck92RmNqRWlaMUg0eTRhUG9PR3o1MkwtQ3M9czk2LWMiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vd3JpdGVyc3Jvb20tYzc4YzkiLCJhdWQiOiJ3cml0ZXJzcm9vbS1jNzhjOSIsImF1dGhfdGltZSI6MTc1ODkxNDI5OSwidXNlcl9pZCI6InJMaExtT2dKRVVZOFVlQUFuZHM4STdNaTFYNzIiLCJzdWIiOiJyTGhMbU9nSkVVWThVZUFBbmRzOEk3TWkxWDcyIiwiaWF0IjoxNzYxNDIzNjAzLCJleHAiOjE3NjE0MjcyMDMsImVtYWlsIjoiamxvZndhbGxAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTIwMjU4NjA1OTcwMTY2MDA1MDQiXSwiZW1haWwiOlsiamxvZndhbGxAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoiZ29vZ2xlLmNvbSJ9fQ.piIaVVTF-uWcdlyw6gE-R8gdEPAtv_sQGaRDgBaskArq0VMxyUvgPxI5Lc0HrmFL7QS63FMsV0Wn2u6XcLx2_6t0uZER3o59HQWybX2wElKKQSMGFV3m-ihvTM0nm91g874ITjqdxOaM8YeFaaoph9nt9FyhH3mLceCkYZDjBvR4f0clRHFpHwa7_Ya__Pme-q05RPNaN2_oSFenv8R869h63xM9XUKdMX8MyOo0RTlc66MHsLC_Ib70nWfiTITXCFroAWu0ZEcLhX7fw2UcJmPtcTNZX54w-hhU31GOyHvc0s7QkRszrbFfK8rlxYi_K5bIxFCTO6bGydpXG1TBaA" 403
INFO:     connection rejected (403 Forbidden)
INFO:     connection closed

>>> WEBSOCKET ENDPOINT CALLED for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f <<<
DEBUG WS: Token received: eyJhbGciOiJSUzI...
DEBUG WS: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Token keys: ['name', 'picture', 'iss', 'aud', 'auth_time', 'user_id', 'sub', 'iat', 'exp', 'email', 'email_verified', 'firebase', 'uid']
DEBUG WS: Extracted firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Returning decoded token with uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> TOKEN VERIFIED, user_info type: <class 'dict'>
>>> EXTRACTING FIREBASE UID...
>>> FIREBASE UID: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> LOOKING UP USER IN DATABASE...
WebSocket error: [Errno 8] nodename nor servname provided, or not known
INFO:     127.0.0.1:51232 - "WebSocket /api/ws/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f?token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkMjEzMGZlZjAyNTg3ZmQ4ODYxODg2OTgyMjczNGVmNzZhMTExNjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiSmFjayBMb2Z3YWxsIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0paVWpvN0E5QzcxNnNTdW1yUldHMmV0ck92RmNqRWlaMUg0eTRhUG9PR3o1MkwtQ3M9czk2LWMiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vd3JpdGVyc3Jvb20tYzc4YzkiLCJhdWQiOiJ3cml0ZXJzcm9vbS1jNzhjOSIsImF1dGhfdGltZSI6MTc1ODkxNDI5OSwidXNlcl9pZCI6InJMaExtT2dKRVVZOFVlQUFuZHM4STdNaTFYNzIiLCJzdWIiOiJyTGhMbU9nSkVVWThVZUFBbmRzOEk3TWkxWDcyIiwiaWF0IjoxNzYxNDIzNjAzLCJleHAiOjE3NjE0MjcyMDMsImVtYWlsIjoiamxvZndhbGxAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTIwMjU4NjA1OTcwMTY2MDA1MDQiXSwiZW1haWwiOlsiamxvZndhbGxAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoiZ29vZ2xlLmNvbSJ9fQ.piIaVVTF-uWcdlyw6gE-R8gdEPAtv_sQGaRDgBaskArq0VMxyUvgPxI5Lc0HrmFL7QS63FMsV0Wn2u6XcLx2_6t0uZER3o59HQWybX2wElKKQSMGFV3m-ihvTM0nm91g874ITjqdxOaM8YeFaaoph9nt9FyhH3mLceCkYZDjBvR4f0clRHFpHwa7_Ya__Pme-q05RPNaN2_oSFenv8R869h63xM9XUKdMX8MyOo0RTlc66MHsLC_Ib70nWfiTITXCFroAWu0ZEcLhX7fw2UcJmPtcTNZX54w-hhU31GOyHvc0s7QkRszrbFfK8rlxYi_K5bIxFCTO6bGydpXG1TBaA" 403
INFO:     connection rejected (403 Forbidden)
INFO:     connection closed

>>> WEBSOCKET ENDPOINT CALLED for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f <<<
DEBUG WS: Token received: eyJhbGciOiJSUzI...
DEBUG WS: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Token keys: ['name', 'picture', 'iss', 'aud', 'auth_time', 'user_id', 'sub', 'iat', 'exp', 'email', 'email_verified', 'firebase', 'uid']
DEBUG WS: Extracted firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Returning decoded token with uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> TOKEN VERIFIED, user_info type: <class 'dict'>
>>> EXTRACTING FIREBASE UID...
>>> FIREBASE UID: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> LOOKING UP USER IN DATABASE...
WebSocket error: [Errno 8] nodename nor servname provided, or not known
INFO:     127.0.0.1:51234 - "WebSocket /api/ws/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f?token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkMjEzMGZlZjAyNTg3ZmQ4ODYxODg2OTgyMjczNGVmNzZhMTExNjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiSmFjayBMb2Z3YWxsIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0paVWpvN0E5QzcxNnNTdW1yUldHMmV0ck92RmNqRWlaMUg0eTRhUG9PR3o1MkwtQ3M9czk2LWMiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vd3JpdGVyc3Jvb20tYzc4YzkiLCJhdWQiOiJ3cml0ZXJzcm9vbS1jNzhjOSIsImF1dGhfdGltZSI6MTc1ODkxNDI5OSwidXNlcl9pZCI6InJMaExtT2dKRVVZOFVlQUFuZHM4STdNaTFYNzIiLCJzdWIiOiJyTGhMbU9nSkVVWThVZUFBbmRzOEk3TWkxWDcyIiwiaWF0IjoxNzYxNDIzNjAzLCJleHAiOjE3NjE0MjcyMDMsImVtYWlsIjoiamxvZndhbGxAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTIwMjU4NjA1OTcwMTY2MDA1MDQiXSwiZW1haWwiOlsiamxvZndhbGxAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoiZ29vZ2xlLmNvbSJ9fQ.piIaVVTF-uWcdlyw6gE-R8gdEPAtv_sQGaRDgBaskArq0VMxyUvgPxI5Lc0HrmFL7QS63FMsV0Wn2u6XcLx2_6t0uZER3o59HQWybX2wElKKQSMGFV3m-ihvTM0nm91g874ITjqdxOaM8YeFaaoph9nt9FyhH3mLceCkYZDjBvR4f0clRHFpHwa7_Ya__Pme-q05RPNaN2_oSFenv8R869h63xM9XUKdMX8MyOo0RTlc66MHsLC_Ib70nWfiTITXCFroAWu0ZEcLhX7fw2UcJmPtcTNZX54w-hhU31GOyHvc0s7QkRszrbFfK8rlxYi_K5bIxFCTO6bGydpXG1TBaA" 403
INFO:     connection rejected (403 Forbidden)
INFO:     connection closed

>>> WEBSOCKET ENDPOINT CALLED for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f <<<
DEBUG WS: Token received: eyJhbGciOiJSUzI...
DEBUG WS: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Token keys: ['name', 'picture', 'iss', 'aud', 'auth_time', 'user_id', 'sub', 'iat', 'exp', 'email', 'email_verified', 'firebase', 'uid']
DEBUG WS: Extracted firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Returning decoded token with uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> TOKEN VERIFIED, user_info type: <class 'dict'>
>>> EXTRACTING FIREBASE UID...
>>> FIREBASE UID: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> LOOKING UP USER IN DATABASE...
WebSocket error: [Errno 8] nodename nor servname provided, or not known
INFO:     127.0.0.1:51244 - "WebSocket /api/ws/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f?token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkMjEzMGZlZjAyNTg3ZmQ4ODYxODg2OTgyMjczNGVmNzZhMTExNjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiSmFjayBMb2Z3YWxsIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0paVWpvN0E5QzcxNnNTdW1yUldHMmV0ck92RmNqRWlaMUg0eTRhUG9PR3o1MkwtQ3M9czk2LWMiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vd3JpdGVyc3Jvb20tYzc4YzkiLCJhdWQiOiJ3cml0ZXJzcm9vbS1jNzhjOSIsImF1dGhfdGltZSI6MTc1ODkxNDI5OSwidXNlcl9pZCI6InJMaExtT2dKRVVZOFVlQUFuZHM4STdNaTFYNzIiLCJzdWIiOiJyTGhMbU9nSkVVWThVZUFBbmRzOEk3TWkxWDcyIiwiaWF0IjoxNzYxNDIzNjAzLCJleHAiOjE3NjE0MjcyMDMsImVtYWlsIjoiamxvZndhbGxAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTIwMjU4NjA1OTcwMTY2MDA1MDQiXSwiZW1haWwiOlsiamxvZndhbGxAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoiZ29vZ2xlLmNvbSJ9fQ.piIaVVTF-uWcdlyw6gE-R8gdEPAtv_sQGaRDgBaskArq0VMxyUvgPxI5Lc0HrmFL7QS63FMsV0Wn2u6XcLx2_6t0uZER3o59HQWybX2wElKKQSMGFV3m-ihvTM0nm91g874ITjqdxOaM8YeFaaoph9nt9FyhH3mLceCkYZDjBvR4f0clRHFpHwa7_Ya__Pme-q05RPNaN2_oSFenv8R869h63xM9XUKdMX8MyOo0RTlc66MHsLC_Ib70nWfiTITXCFroAWu0ZEcLhX7fw2UcJmPtcTNZX54w-hhU31GOyHvc0s7QkRszrbFfK8rlxYi_K5bIxFCTO6bGydpXG1TBaA" 403
INFO:     connection rejected (403 Forbidden)
INFO:     connection closed

>>> WEBSOCKET ENDPOINT CALLED for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f <<<
DEBUG WS: Token received: eyJhbGciOiJSUzI...
DEBUG WS: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Token keys: ['name', 'picture', 'iss', 'aud', 'auth_time', 'user_id', 'sub', 'iat', 'exp', 'email', 'email_verified', 'firebase', 'uid']
DEBUG WS: Extracted firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Returning decoded token with uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> TOKEN VERIFIED, user_info type: <class 'dict'>
>>> EXTRACTING FIREBASE UID...
>>> FIREBASE UID: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> LOOKING UP USER IN DATABASE...
WebSocket error: [Errno 8] nodename nor servname provided, or not known
INFO:     127.0.0.1:51262 - "WebSocket /api/ws/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f?token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkMjEzMGZlZjAyNTg3ZmQ4ODYxODg2OTgyMjczNGVmNzZhMTExNjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiSmFjayBMb2Z3YWxsIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0paVWpvN0E5QzcxNnNTdW1yUldHMmV0ck92RmNqRWlaMUg0eTRhUG9PR3o1MkwtQ3M9czk2LWMiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vd3JpdGVyc3Jvb20tYzc4YzkiLCJhdWQiOiJ3cml0ZXJzcm9vbS1jNzhjOSIsImF1dGhfdGltZSI6MTc1ODkxNDI5OSwidXNlcl9pZCI6InJMaExtT2dKRVVZOFVlQUFuZHM4STdNaTFYNzIiLCJzdWIiOiJyTGhMbU9nSkVVWThVZUFBbmRzOEk3TWkxWDcyIiwiaWF0IjoxNzYxNDIzNjAzLCJleHAiOjE3NjE0MjcyMDMsImVtYWlsIjoiamxvZndhbGxAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTIwMjU4NjA1OTcwMTY2MDA1MDQiXSwiZW1haWwiOlsiamxvZndhbGxAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoiZ29vZ2xlLmNvbSJ9fQ.piIaVVTF-uWcdlyw6gE-R8gdEPAtv_sQGaRDgBaskArq0VMxyUvgPxI5Lc0HrmFL7QS63FMsV0Wn2u6XcLx2_6t0uZER3o59HQWybX2wElKKQSMGFV3m-ihvTM0nm91g874ITjqdxOaM8YeFaaoph9nt9FyhH3mLceCkYZDjBvR4f0clRHFpHwa7_Ya__Pme-q05RPNaN2_oSFenv8R869h63xM9XUKdMX8MyOo0RTlc66MHsLC_Ib70nWfiTITXCFroAWu0ZEcLhX7fw2UcJmPtcTNZX54w-hhU31GOyHvc0s7QkRszrbFfK8rlxYi_K5bIxFCTO6bGydpXG1TBaA" 403
INFO:     connection rejected (403 Forbidden)
INFO:     connection closed
DEBUG: Database error during user lookup: [Errno 8] nodename nor servname provided, or not known
DEBUG: Authentication error: [Errno 8] nodename nor servname provided, or not known
INFO:     127.0.0.1:51162 - "PATCH /api/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f HTTP/1.1" 401 Unauthorized
DEBUG: Authentication process started
DEBUG: Token received: eyJhbGciOiJSUzI...
DEBUG: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG: Looking up user with firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG: User lookup result: Found
DEBUG: Validating access for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f and user 2157d1b1-b88f-4b4f-a25b-13dc50dea852
DEBUG: Finding scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f with script
DEBUG: Found scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f with script_id cc8f8126-fdd9-44cf-8e18-289926115a5d
DEBUG: Found scene with ID b5fbc5ef-b491-4943-8bdb-e07a862ac44f
DEBUG: Found script cc8f8126-fdd9-44cf-8e18-289926115a5d owned by 2157d1b1-b88f-4b4f-a25b-13dc50dea852
DEBUG: User 2157d1b1-b88f-4b4f-a25b-13dc50dea852 is script owner - access granted
DEBUG: Beginning update for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f, base_version=1
DEBUG: Found scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f with script_id cc8f8126-fdd9-44cf-8e18-289926115a5d

⚠️  SCENE 0 UPDATE DETECTED:
   Scene ID: b5fbc5ef-b491-4943-8bdb-e07a862ac44f
   Current content_blocks: 17 blocks
   New content_blocks: 17 blocks
   Current scene_heading: INT. HALLWAY - SASKATOON POLICE DEPARTMENT – NIGHT TEst
   New scene_heading: INT. HALLWAY - SASKATOON POLICE DEPARTMENT – NIGHT TEst offline

INFO:     127.0.0.1:51334 - "PATCH /api/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f HTTP/1.1" 200 OK
DEBUG: Authentication process started
DEBUG: Token received: eyJhbGciOiJSUzI...
DEBUG: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG: Looking up user with firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG: User lookup result: Found
DEBUG: Validating access for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f and user 2157d1b1-b88f-4b4f-a25b-13dc50dea852
DEBUG: Finding scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f with script
DEBUG: Found scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f with script_id cc8f8126-fdd9-44cf-8e18-289926115a5d
DEBUG: Found scene with ID b5fbc5ef-b491-4943-8bdb-e07a862ac44f
DEBUG: Found script cc8f8126-fdd9-44cf-8e18-289926115a5d owned by 2157d1b1-b88f-4b4f-a25b-13dc50dea852
DEBUG: User 2157d1b1-b88f-4b4f-a25b-13dc50dea852 is script owner - access granted
DEBUG: Beginning update for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f, base_version=2
DEBUG: Found scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f with script_id cc8f8126-fdd9-44cf-8e18-289926115a5d

⚠️  SCENE 0 UPDATE DETECTED:
   Scene ID: b5fbc5ef-b491-4943-8bdb-e07a862ac44f
   Current content_blocks: 17 blocks
   New content_blocks: 17 blocks
   Current scene_heading: INT. HALLWAY - SASKATOON POLICE DEPARTMENT – NIGHT TEst offline
   New scene_heading: INT. HALLWAY - SASKATOON POLICE DEPARTMENT – NIGHT TEst offline

INFO:     127.0.0.1:51334 - "PATCH /api/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f HTTP/1.1" 200 OK
DEBUG: Authentication process started
DEBUG: Token received: eyJhbGciOiJSUzI...
DEBUG: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG: Looking up user with firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG: User lookup result: Found
>>> Using REST content (newer than Yjs): REST=2025-10-25 20:26:57.239353 > Yjs=2025-10-25 20:26:11.748153
INFO:     127.0.0.1:51835 - "GET /api/scripts/cc8f8126-fdd9-44cf-8e18-289926115a5d/scenes HTTP/1.1" 200 OK

>>> WEBSOCKET ENDPOINT CALLED for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f <<<
DEBUG WS: Token received: eyJhbGciOiJSUzI...
DEBUG WS: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Token keys: ['name', 'picture', 'iss', 'aud', 'auth_time', 'user_id', 'sub', 'iat', 'exp', 'email', 'email_verified', 'firebase', 'uid']
DEBUG WS: Extracted firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Returning decoded token with uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> TOKEN VERIFIED, user_info type: <class 'dict'>
>>> EXTRACTING FIREBASE UID...
>>> FIREBASE UID: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> LOOKING UP USER IN DATABASE...
>>> DATABASE QUERY EXECUTED
>>> USER FOUND: True
>>> USER ID: 2157d1b1-b88f-4b4f-a25b-13dc50dea852, NAME: Jack Lofwall
>>> ABOUT TO CONNECT WEBSOCKET
>>> CALLING websocket_manager.connect()
INFO:     127.0.0.1:51853 - "WebSocket /api/ws/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f?token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkMjEzMGZlZjAyNTg3ZmQ4ODYxODg2OTgyMjczNGVmNzZhMTExNjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiSmFjayBMb2Z3YWxsIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0paVWpvN0E5QzcxNnNTdW1yUldHMmV0ck92RmNqRWlaMUg0eTRhUG9PR3o1MkwtQ3M9czk2LWMiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vd3JpdGVyc3Jvb20tYzc4YzkiLCJhdWQiOiJ3cml0ZXJzcm9vbS1jNzhjOSIsImF1dGhfdGltZSI6MTc1ODkxNDI5OSwidXNlcl9pZCI6InJMaExtT2dKRVVZOFVlQUFuZHM4STdNaTFYNzIiLCJzdWIiOiJyTGhMbU9nSkVVWThVZUFBbmRzOEk3TWkxWDcyIiwiaWF0IjoxNzYxNDIzNjAzLCJleHAiOjE3NjE0MjcyMDMsImVtYWlsIjoiamxvZndhbGxAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTIwMjU4NjA1OTcwMTY2MDA1MDQiXSwiZW1haWwiOlsiamxvZndhbGxAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoiZ29vZ2xlLmNvbSJ9fQ.piIaVVTF-uWcdlyw6gE-R8gdEPAtv_sQGaRDgBaskArq0VMxyUvgPxI5Lc0HrmFL7QS63FMsV0Wn2u6XcLx2_6t0uZER3o59HQWybX2wElKKQSMGFV3m-ihvTM0nm91g874ITjqdxOaM8YeFaaoph9nt9FyhH3mLceCkYZDjBvR4f0clRHFpHwa7_Ya__Pme-q05RPNaN2_oSFenv8R869h63xM9XUKdMX8MyOo0RTlc66MHsLC_Ib70nWfiTITXCFroAWu0ZEcLhX7fw2UcJmPtcTNZX54w-hhU31GOyHvc0s7QkRszrbFfK8rlxYi_K5bIxFCTO6bGydpXG1TBaA" [accepted]
>>> WEBSOCKET CONNECTED! connection_info: <app.services.websocket_manager.ConnectionInfo object at 0x1162d32f0>
>>> YJS DOCUMENT CREATED
INFO:     connection open
>>> LOADED 44 PERSISTED UPDATE(S)
>>> SETTING UP REDIS...
>>> REDIS MANAGER OBTAINED
>>> SUBSCRIBED TO REDIS
>>> ENTERING MESSAGE LOOP
>>> REPLIED SYNCSTEP2 (5555 bytes)
>>> SENT SYNCSTEP1 to client (18 bytes)
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> APPLIED UPDATE (type 1) size=319
>>> BROADCASTED SYNC_STEP2 as SYNC_UPDATE to peers (323 bytes)
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
DEBUG: Authentication process started
DEBUG: Token received: eyJhbGciOiJSUzI...
DEBUG: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG: Looking up user with firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG: User lookup result: Found
DEBUG: Validating access for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f and user 2157d1b1-b88f-4b4f-a25b-13dc50dea852
DEBUG: Finding scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f with script
DEBUG: Found scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f with script_id cc8f8126-fdd9-44cf-8e18-289926115a5d
DEBUG: Found scene with ID b5fbc5ef-b491-4943-8bdb-e07a862ac44f
DEBUG: Found script cc8f8126-fdd9-44cf-8e18-289926115a5d owned by 2157d1b1-b88f-4b4f-a25b-13dc50dea852
DEBUG: User 2157d1b1-b88f-4b4f-a25b-13dc50dea852 is script owner - access granted
DEBUG: Beginning update for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f, base_version=3
DEBUG: Found scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f with script_id cc8f8126-fdd9-44cf-8e18-289926115a5d

⚠️  SCENE 0 UPDATE DETECTED:
   Scene ID: b5fbc5ef-b491-4943-8bdb-e07a862ac44f
   Current content_blocks: 17 blocks
   New content_blocks: 17 blocks
   Current scene_heading: INT. HALLWAY - SASKATOON POLICE DEPARTMENT – NIGHT TEst offline
   New scene_heading: INT. HALLWAY - SASKATOON POLICE DEPARTMENT – NIGHT TEst

INFO:     127.0.0.1:51835 - "PATCH /api/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f HTTP/1.1" 200 OK
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
Error broadcasting to user 2157d1b1-b88f-4b4f-a25b-13dc50dea852: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
INFO:     connection closed

>>> WEBSOCKET ENDPOINT CALLED for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f <<<
DEBUG WS: Token received: eyJhbGciOiJSUzI...
DEBUG WS: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Token keys: ['name', 'picture', 'iss', 'aud', 'auth_time', 'user_id', 'sub', 'iat', 'exp', 'email', 'email_verified', 'firebase', 'uid']
DEBUG WS: Extracted firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Returning decoded token with uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> TOKEN VERIFIED, user_info type: <class 'dict'>
>>> EXTRACTING FIREBASE UID...
>>> FIREBASE UID: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> LOOKING UP USER IN DATABASE...
>>> DATABASE QUERY EXECUTED
>>> USER FOUND: True
>>> USER ID: 2157d1b1-b88f-4b4f-a25b-13dc50dea852, NAME: Jack Lofwall
>>> ABOUT TO CONNECT WEBSOCKET
>>> CALLING websocket_manager.connect()
INFO:     127.0.0.1:52124 - "WebSocket /api/ws/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f?token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkMjEzMGZlZjAyNTg3ZmQ4ODYxODg2OTgyMjczNGVmNzZhMTExNjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiSmFjayBMb2Z3YWxsIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0paVWpvN0E5QzcxNnNTdW1yUldHMmV0ck92RmNqRWlaMUg0eTRhUG9PR3o1MkwtQ3M9czk2LWMiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vd3JpdGVyc3Jvb20tYzc4YzkiLCJhdWQiOiJ3cml0ZXJzcm9vbS1jNzhjOSIsImF1dGhfdGltZSI6MTc1ODkxNDI5OSwidXNlcl9pZCI6InJMaExtT2dKRVVZOFVlQUFuZHM4STdNaTFYNzIiLCJzdWIiOiJyTGhMbU9nSkVVWThVZUFBbmRzOEk3TWkxWDcyIiwiaWF0IjoxNzYxNDIzNjAzLCJleHAiOjE3NjE0MjcyMDMsImVtYWlsIjoiamxvZndhbGxAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTIwMjU4NjA1OTcwMTY2MDA1MDQiXSwiZW1haWwiOlsiamxvZndhbGxAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoiZ29vZ2xlLmNvbSJ9fQ.piIaVVTF-uWcdlyw6gE-R8gdEPAtv_sQGaRDgBaskArq0VMxyUvgPxI5Lc0HrmFL7QS63FMsV0Wn2u6XcLx2_6t0uZER3o59HQWybX2wElKKQSMGFV3m-ihvTM0nm91g874ITjqdxOaM8YeFaaoph9nt9FyhH3mLceCkYZDjBvR4f0clRHFpHwa7_Ya__Pme-q05RPNaN2_oSFenv8R869h63xM9XUKdMX8MyOo0RTlc66MHsLC_Ib70nWfiTITXCFroAWu0ZEcLhX7fw2UcJmPtcTNZX54w-hhU31GOyHvc0s7QkRszrbFfK8rlxYi_K5bIxFCTO6bGydpXG1TBaA" [accepted]
>>> WEBSOCKET CONNECTED! connection_info: <app.services.websocket_manager.ConnectionInfo object at 0x11757a150>
>>> YJS DOCUMENT CREATED
INFO:     connection open
>>> LOADED 45 PERSISTED UPDATE(S)
>>> SETTING UP REDIS...
>>> REDIS MANAGER OBTAINED
>>> SUBSCRIBED TO REDIS
>>> ENTERING MESSAGE LOOP
>>> REPLIED SYNCSTEP2 (47 bytes)
>>> SENT SYNCSTEP1 to client (25 bytes)
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> APPLIED UPDATE (type 1) size=44
>>> BROADCASTED SYNC_STEP2 as SYNC_UPDATE to peers (47 bytes)
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
Error broadcasting to user 2157d1b1-b88f-4b4f-a25b-13dc50dea852: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
INFO:     connection closed

>>> WEBSOCKET ENDPOINT CALLED for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f <<<
DEBUG WS: Token received: eyJhbGciOiJSUzI...
DEBUG WS: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Token keys: ['name', 'picture', 'iss', 'aud', 'auth_time', 'user_id', 'sub', 'iat', 'exp', 'email', 'email_verified', 'firebase', 'uid']
DEBUG WS: Extracted firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Returning decoded token with uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> TOKEN VERIFIED, user_info type: <class 'dict'>
>>> EXTRACTING FIREBASE UID...
>>> FIREBASE UID: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> LOOKING UP USER IN DATABASE...
>>> DATABASE QUERY EXECUTED
>>> USER FOUND: True
>>> USER ID: 2157d1b1-b88f-4b4f-a25b-13dc50dea852, NAME: Jack Lofwall
>>> ABOUT TO CONNECT WEBSOCKET
>>> CALLING websocket_manager.connect()
INFO:     127.0.0.1:52393 - "WebSocket /api/ws/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f?token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkMjEzMGZlZjAyNTg3ZmQ4ODYxODg2OTgyMjczNGVmNzZhMTExNjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiSmFjayBMb2Z3YWxsIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0paVWpvN0E5QzcxNnNTdW1yUldHMmV0ck92RmNqRWlaMUg0eTRhUG9PR3o1MkwtQ3M9czk2LWMiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vd3JpdGVyc3Jvb20tYzc4YzkiLCJhdWQiOiJ3cml0ZXJzcm9vbS1jNzhjOSIsImF1dGhfdGltZSI6MTc1ODkxNDI5OSwidXNlcl9pZCI6InJMaExtT2dKRVVZOFVlQUFuZHM4STdNaTFYNzIiLCJzdWIiOiJyTGhMbU9nSkVVWThVZUFBbmRzOEk3TWkxWDcyIiwiaWF0IjoxNzYxNDIzNjAzLCJleHAiOjE3NjE0MjcyMDMsImVtYWlsIjoiamxvZndhbGxAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTIwMjU4NjA1OTcwMTY2MDA1MDQiXSwiZW1haWwiOlsiamxvZndhbGxAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoiZ29vZ2xlLmNvbSJ9fQ.piIaVVTF-uWcdlyw6gE-R8gdEPAtv_sQGaRDgBaskArq0VMxyUvgPxI5Lc0HrmFL7QS63FMsV0Wn2u6XcLx2_6t0uZER3o59HQWybX2wElKKQSMGFV3m-ihvTM0nm91g874ITjqdxOaM8YeFaaoph9nt9FyhH3mLceCkYZDjBvR4f0clRHFpHwa7_Ya__Pme-q05RPNaN2_oSFenv8R869h63xM9XUKdMX8MyOo0RTlc66MHsLC_Ib70nWfiTITXCFroAWu0ZEcLhX7fw2UcJmPtcTNZX54w-hhU31GOyHvc0s7QkRszrbFfK8rlxYi_K5bIxFCTO6bGydpXG1TBaA" [accepted]
>>> WEBSOCKET CONNECTED! connection_info: <app.services.websocket_manager.ConnectionInfo object at 0x121a9db20>
>>> YJS DOCUMENT CREATED
INFO:     connection open
>>> LOADED 46 PERSISTED UPDATE(S)
>>> SETTING UP REDIS...
>>> REDIS MANAGER OBTAINED
>>> SUBSCRIBED TO REDIS
>>> ENTERING MESSAGE LOOP
>>> REPLIED SYNCSTEP2 (47 bytes)
>>> SENT SYNCSTEP1 to client (25 bytes)
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> APPLIED UPDATE (type 1) size=44
>>> BROADCASTED SYNC_STEP2 as SYNC_UPDATE to peers (47 bytes)
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
Error broadcasting to user 2157d1b1-b88f-4b4f-a25b-13dc50dea852: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
INFO:     connection closed

>>> WEBSOCKET ENDPOINT CALLED for scene b5fbc5ef-b491-4943-8bdb-e07a862ac44f <<<
DEBUG WS: Token received: eyJhbGciOiJSUzI...
DEBUG WS: Token verified successfully, uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Token keys: ['name', 'picture', 'iss', 'aud', 'auth_time', 'user_id', 'sub', 'iat', 'exp', 'email', 'email_verified', 'firebase', 'uid']
DEBUG WS: Extracted firebase_uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
DEBUG WS: Returning decoded token with uid: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> TOKEN VERIFIED, user_info type: <class 'dict'>
>>> EXTRACTING FIREBASE UID...
>>> FIREBASE UID: rLhLmOgJEUY8UeAAnds8I7Mi1X72
>>> LOOKING UP USER IN DATABASE...
>>> DATABASE QUERY EXECUTED
>>> USER FOUND: True
>>> USER ID: 2157d1b1-b88f-4b4f-a25b-13dc50dea852, NAME: Jack Lofwall
>>> ABOUT TO CONNECT WEBSOCKET
>>> CALLING websocket_manager.connect()
INFO:     127.0.0.1:52668 - "WebSocket /api/ws/scenes/b5fbc5ef-b491-4943-8bdb-e07a862ac44f?token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkMjEzMGZlZjAyNTg3ZmQ4ODYxODg2OTgyMjczNGVmNzZhMTExNjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiSmFjayBMb2Z3YWxsIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0paVWpvN0E5QzcxNnNTdW1yUldHMmV0ck92RmNqRWlaMUg0eTRhUG9PR3o1MkwtQ3M9czk2LWMiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vd3JpdGVyc3Jvb20tYzc4YzkiLCJhdWQiOiJ3cml0ZXJzcm9vbS1jNzhjOSIsImF1dGhfdGltZSI6MTc1ODkxNDI5OSwidXNlcl9pZCI6InJMaExtT2dKRVVZOFVlQUFuZHM4STdNaTFYNzIiLCJzdWIiOiJyTGhMbU9nSkVVWThVZUFBbmRzOEk3TWkxWDcyIiwiaWF0IjoxNzYxNDIzNjAzLCJleHAiOjE3NjE0MjcyMDMsImVtYWlsIjoiamxvZndhbGxAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTIwMjU4NjA1OTcwMTY2MDA1MDQiXSwiZW1haWwiOlsiamxvZndhbGxAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoiZ29vZ2xlLmNvbSJ9fQ.piIaVVTF-uWcdlyw6gE-R8gdEPAtv_sQGaRDgBaskArq0VMxyUvgPxI5Lc0HrmFL7QS63FMsV0Wn2u6XcLx2_6t0uZER3o59HQWybX2wElKKQSMGFV3m-ihvTM0nm91g874ITjqdxOaM8YeFaaoph9nt9FyhH3mLceCkYZDjBvR4f0clRHFpHwa7_Ya__Pme-q05RPNaN2_oSFenv8R869h63xM9XUKdMX8MyOo0RTlc66MHsLC_Ib70nWfiTITXCFroAWu0ZEcLhX7fw2UcJmPtcTNZX54w-hhU31GOyHvc0s7QkRszrbFfK8rlxYi_K5bIxFCTO6bGydpXG1TBaA" [accepted]
>>> WEBSOCKET CONNECTED! connection_info: <app.services.websocket_manager.ConnectionInfo object at 0x10568f6e0>
>>> YJS DOCUMENT CREATED
INFO:     connection open
>>> LOADED 47 PERSISTED UPDATE(S)
>>> SETTING UP REDIS...
>>> REDIS MANAGER OBTAINED
>>> SUBSCRIBED TO REDIS
>>> ENTERING MESSAGE LOOP
>>> REPLIED SYNCSTEP2 (47 bytes)
>>> SENT SYNCSTEP1 to client (25 bytes)
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> APPLIED UPDATE (type 1) size=44
>>> BROADCASTED SYNC_STEP2 as SYNC_UPDATE to peers (47 bytes)
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
>>> REDIS MESSAGE RECEIVED: sender=2157d1b1-b88f-4b4f-a25b-13dc50dea852, current_user=2157d1b1-b88f-4b4f-a25b-13dc50dea852, match=True
>>> SKIPPING ECHO: Message from same user
Error broadcasting to user 2157d1b1-b88f-4b4f-a25b-13dc50dea852: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
INFO:     connection closed